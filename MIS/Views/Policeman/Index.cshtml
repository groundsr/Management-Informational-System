@using MSI.Model

@model IEnumerable<Policeman> 

    <div class="container mt-4 mb-5">
        <div class="row text-center">
            @*<div class="col col-4 text-center">
                <a class="btn btn-success text-center" onclick="showInPopup('@Url.Action("AddOrEdit","Policeman",null,Context.Request.Scheme)', 'New Policeman')" style="width:150px">
                    <h4>Create</h4>
                </a>
            </div>*@
            <div class="col col-8 text-center" style="width:400px; margin-left:auto">
                <form asp-controller="Policeman" asp-action="Index" id="textsearch" method="get">
                    <div class="input-group rounded">
                        <input type="text" class="form-control rounded" placeholder="Search" aria-label="Search"
                               aria-describedby="search-addon" name="Term" />
                        <input type="hidden" class="search-input" placeholder="Search..." name="Name" value="searchPoliceman">

                        <button type="submit" class="input-group-text border-0" id="search-addon"  value="Filter">
                            <i class="fa fa-search"> </i>
                        </button>

                        @*<span >
                            <i class="fas fa-search"></i>
                        </span>*@
                    </div>
                </form>
            </div>
        </div>
    </div>



    <table class="table table-striped table-hover">
        <thead>
            <tr>

                <th scope="col">Name</th>
                <th scope="col">Email</th>
                <th scope="col">Update</th>
                <th scope="col">Delete</th>

            </tr>
        </thead>
        <tbody>

            @foreach (var obj in Model)
            {
                <tr>
                    <td>@obj.Name</td>
                    <td>@obj.Email</td>
                    <td>
                        <i  onclick="next('@obj.Id')"></i>
                        
                            <a data-target="#editPolicemanModal" data-toggle="modal" class="btn btn-record-edit" 
                               onclick="loadEditModal('@obj.Id', '@obj.Name', '@obj.Email')">
                            <i class="far fa-edit" style="font-size : 12px;"></i>Update</a>
                    </td>
                    <td>
                        <form asp-action="Delete" asp-controller="Policeman" asp-route-id="@obj.Id">
                            <button type="submit" class="btn btn-record-delete">
                                <i class="fas fa-trash" style="font-size : 12px;">

                                </i> Delete
                            </button>
                        </form>
                    </td>
                </tr>
            }

        </tbody>
    </table>

    <div class="modal fade" id="editPolicemanModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <form asp-controller="Policeman" asp-action="Update">
                        <partial name="_EditPoliceman" />
                    </form>
                </div>
            </div>
        </div>
    </div>


<script>
    //function next(id) {
    //    $.ajax(
    //        {
    //            url: "Policeman/Details?recordId=" + id,
    //            type: 'GET',
    //            success: function (data) {
    //                window.location.href = "https://localhost:44300/CriminalRecord/Details?recordId=" + id;
    //            }
    //        })
    //}

    function loadEditModal(id, name, email) {
        $("#editPolicemanID").val(id)
        $("#editPolicemanName").val(name)
        $("#editPolicemanEmail").val(email)
        $('#editPoliceman').modal('show');
        
    }

    function getPolicemanId() {
        var id = document.getElementById('policemanId').value;
        return id;
    }

   
</script>

   